(()=>{"use strict";const e=window.React,t=window.wp.blocks,o=window.wp.blockEditor,r=window.wp.components,a=window.wp.element;(0,t.registerBlockType)("custom/circle-progress-bar",{title:"Circle Progress Bar",icon:"chart-pie",category:"widgets",description:"A customizable circle progress bar with animation options.",keywords:["progress","circle","animation"],supports:{html:!1},attributes:{percentage:{type:"number",default:75},size:{type:"number",default:100},strokeColor:{type:"string",default:"#00aaff"},bgColor:{type:"string",default:"#e6e6e6"},text:{type:"string",default:"Progress"},animationSpeed:{type:"number",default:1},useShadow:{type:"boolean",default:!1},useGradient:{type:"boolean",default:!1},strokeWidth:{type:"number",default:10},fontSize:{type:"number",default:20},fontColor:{type:"string",default:"#333"}},edit({attributes:t,setAttributes:l}){const{percentage:n,size:s,strokeColor:i,bgColor:c,text:d,animationSpeed:m,useShadow:p,useGradient:u,strokeWidth:f,fontSize:g,fontColor:h}=t,y=s/2,C=y-f/2,b=2*C*Math.PI,k=b-n/100*b,x="grad-"+Math.random().toString(36).substring(2,8),E=(0,a.useRef)(null),w=(0,a.useRef)(null),S=(t,o,a)=>(0,e.createElement)("div",{style:{marginBottom:"16px"}},(0,e.createElement)("label",{style:{display:"block",marginBottom:"4px"}},t),(0,e.createElement)(r.ColorPicker,{color:o,onChangeComplete:e=>a(e.hex),disableAlpha:!0}));return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.InspectorControls,null,(0,e.createElement)(r.PanelBody,{title:"Settings"},(0,e.createElement)(r.RangeControl,{label:"Progress (%)",value:n,onChange:e=>l({percentage:e}),min:0,max:100}),(0,e.createElement)(r.RangeControl,{label:"Size (px)",value:s,onChange:e=>l({size:e}),min:50,max:300}),(0,e.createElement)(r.RangeControl,{label:"Stroke Width",value:f,onChange:e=>l({strokeWidth:e}),min:1,max:30}),(0,e.createElement)(r.RangeControl,{label:"Font Size",value:g,onChange:e=>l({fontSize:e}),min:10,max:50}),(0,e.createElement)(r.RangeControl,{label:"Animation Speed (sec)",value:m,onChange:e=>l({animationSpeed:e}),min:.1,max:5,step:.1}),(0,e.createElement)(r.TextControl,{label:"Custom Text",value:d,onChange:e=>l({text:e})}),S("Stroke Color",i,(e=>l({strokeColor:e}))),S("Background Color",c,(e=>l({bgColor:e}))),S("Font Color",h,(e=>l({fontColor:e}))),(0,e.createElement)(r.SelectControl,{label:"Use Gradient?",value:u?"yes":"no",options:[{label:"No",value:"no"},{label:"Yes",value:"yes"}],onChange:e=>l({useGradient:"yes"===e})}),(0,e.createElement)(r.SelectControl,{label:"Use Shadow?",value:p?"yes":"no",options:[{label:"No",value:"no"},{label:"Yes",value:"yes"}],onChange:e=>l({useShadow:"yes"===e})}))),(0,e.createElement)("svg",{height:s,width:s,style:{display:"block",margin:"auto"}},u&&(0,e.createElement)("defs",null,(0,e.createElement)("linearGradient",{id:x,x1:"0%",y1:"0%",x2:"100%",y2:"100%"},(0,e.createElement)("stop",{offset:"0%",stopColor:"#00aaff"}),(0,e.createElement)("stop",{offset:"100%",stopColor:i}))),(0,e.createElement)("circle",{stroke:c,fill:"transparent",strokeWidth:f,r:C,cx:y,cy:y}),(0,e.createElement)("circle",{ref:E,stroke:u?`url(#${x})`:i,fill:"transparent",strokeWidth:f,strokeDasharray:`${b} ${b}`,strokeDashoffset:k,strokeLinecap:"round",r:C,cx:y,cy:y,style:{transition:`stroke-dashoffset ${m}s`,filter:p?"drop-shadow(0 0 5px rgba(0,0,0,0.5))":"none"}}),(0,e.createElement)("text",{ref:w,x:"50%",y:"50%",textAnchor:"middle",dy:".3em",fontSize:g,fill:h},d)))},save({attributes:t}){const{percentage:o,size:r,strokeColor:a,bgColor:l,text:n,useShadow:s,useGradient:i,strokeWidth:c,fontSize:d,fontColor:m}=t,p=r/2,u=p-c/2,f=2*u*Math.PI,g=f-o/100*f,h="grad-static";return(0,e.createElement)("svg",{height:r,width:r,style:{display:"block",margin:"auto"}},i&&(0,e.createElement)("defs",null,(0,e.createElement)("linearGradient",{id:h,x1:"0%",y1:"0%",x2:"100%",y2:"100%"},(0,e.createElement)("stop",{offset:"0%",stopColor:"#00aaff"}),(0,e.createElement)("stop",{offset:"100%",stopColor:a}))),(0,e.createElement)("circle",{stroke:l,fill:"transparent",strokeWidth:c,r:u,cx:p,cy:p}),(0,e.createElement)("circle",{stroke:i?`url(#${h})`:a,fill:"transparent",strokeWidth:c,strokeDasharray:`${f} ${f}`,strokeDashoffset:g,strokeLinecap:"round",r:u,cx:p,cy:p,style:{filter:s?"drop-shadow(0 0 5px rgba(0,0,0,0.5))":"none"}}),(0,e.createElement)("text",{x:"50%",y:"50%",textAnchor:"middle",dy:".3em",fontSize:d,fill:m},n))}})})();