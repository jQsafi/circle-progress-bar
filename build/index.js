(()=>{"use strict";const e=window.React,t=window.wp.blocks,o=window.wp.blockEditor,r=window.wp.components;(0,t.registerBlockType)("circle-progress-bar/progress",{title:"Circle Progress Bar",icon:"chart-pie",category:"widgets",description:"A customizable circle progress bar with animation options.",keywords:["progress","circle","animation"],supports:{html:!1},attributes:{percentage:{type:"number",default:75},size:{type:"number",default:100},strokeColor:{type:"string",default:"#00aaff"},bgColor:{type:"string",default:"#e6e6e6"},text:{type:"string",default:"Progress"},animationSpeed:{type:"number",default:1},useShadow:{type:"boolean",default:!1},useGradient:{type:"boolean",default:!1},strokeWidth:{type:"number",default:10},fontSize:{type:"number",default:20},fontColor:{type:"string",default:"#333"}},edit({attributes:t,setAttributes:a}){const{percentage:n,size:l,strokeColor:s,bgColor:i,text:c,animationSpeed:d,useShadow:m,useGradient:p,strokeWidth:u,fontSize:f,fontColor:g}=t,h=l/2,y=h-u/2,b=2*y*Math.PI,C=b-n/100*b,k="grad-"+Math.random().toString(36).substring(2,8),E=(t,o,a)=>(0,e.createElement)("div",{style:{marginBottom:"16px"}},(0,e.createElement)("div",{className:"components-base-control__field"},(0,e.createElement)("span",{className:"components-base-control__label"},t),(0,e.createElement)(r.ColorPicker,{color:o,onChangeComplete:e=>a(e.hex),disableAlpha:!0})));return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.InspectorControls,null,(0,e.createElement)(r.PanelBody,{title:"Settings"},(0,e.createElement)(r.RangeControl,{label:"Progress (%)",value:n,onChange:e=>a({percentage:e}),min:0,max:100}),(0,e.createElement)(r.RangeControl,{label:"Size (px)",value:l,onChange:e=>a({size:e}),min:50,max:300}),(0,e.createElement)(r.RangeControl,{label:"Stroke Width",value:u,onChange:e=>a({strokeWidth:e}),min:1,max:30}),(0,e.createElement)(r.RangeControl,{label:"Font Size",value:f,onChange:e=>a({fontSize:e}),min:10,max:50}),(0,e.createElement)(r.RangeControl,{label:"Animation Speed (sec)",value:d,onChange:e=>a({animationSpeed:e}),min:.1,max:5,step:.1}),(0,e.createElement)(r.TextControl,{label:"Custom Text",value:c,onChange:e=>a({text:e})}),E("Stroke Color",s,(e=>a({strokeColor:e}))),E("Background Color",i,(e=>a({bgColor:e}))),E("Font Color",g,(e=>a({fontColor:e}))),(0,e.createElement)(r.SelectControl,{label:"Use Gradient?",value:p?"yes":"no",options:[{label:"No",value:"no"},{label:"Yes",value:"yes"}],onChange:e=>a({useGradient:"yes"===e})}),(0,e.createElement)(r.SelectControl,{label:"Use Shadow?",value:m?"yes":"no",options:[{label:"No",value:"no"},{label:"Yes",value:"yes"}],onChange:e=>a({useShadow:"yes"===e})}))),(0,e.createElement)("svg",{height:l,width:l,style:{display:"block",margin:"auto"}},p&&(0,e.createElement)("defs",null,(0,e.createElement)("linearGradient",{id:k,x1:"0%",y1:"0%",x2:"100%",y2:"100%"},(0,e.createElement)("stop",{offset:"0%",stopColor:"#00aaff"}),(0,e.createElement)("stop",{offset:"100%",stopColor:s}))),(0,e.createElement)("circle",{stroke:i,fill:"transparent",strokeWidth:u,r:y,cx:h,cy:h}),(0,e.createElement)("circle",{stroke:p?`url(#${k})`:s,fill:"transparent",strokeWidth:u,strokeDasharray:`${b} ${b}`,strokeDashoffset:C,strokeLinecap:"round",r:y,cx:h,cy:h,style:{transition:`stroke-dashoffset ${d}s`,filter:m?"drop-shadow(0 0 5px rgba(0,0,0,0.5))":"none"}}),(0,e.createElement)("text",{x:"50%",y:"50%",textAnchor:"middle",dy:".3em",fontSize:f,fill:g},c)))},save({attributes:t}){const{percentage:o,size:r,strokeColor:a,bgColor:n,text:l,useShadow:s,useGradient:i,strokeWidth:c,fontSize:d,fontColor:m}=t,p=r/2,u=p-c/2,f=2*u*Math.PI,g=f-o/100*f,h="grad-static";return(0,e.createElement)("svg",{height:r,width:r,style:{display:"block",margin:"auto"}},i&&(0,e.createElement)("defs",null,(0,e.createElement)("linearGradient",{id:h,x1:"0%",y1:"0%",x2:"100%",y2:"100%"},(0,e.createElement)("stop",{offset:"0%",stopColor:"#00aaff"}),(0,e.createElement)("stop",{offset:"100%",stopColor:a}))),(0,e.createElement)("circle",{stroke:n,fill:"transparent",strokeWidth:c,r:u,cx:p,cy:p}),(0,e.createElement)("circle",{stroke:i?`url(#${h})`:a,fill:"transparent",strokeWidth:c,strokeDasharray:`${f} ${f}`,strokeDashoffset:g,strokeLinecap:"round",r:u,cx:p,cy:p,style:{filter:s?"drop-shadow(0 0 5px rgba(0,0,0,0.5))":"none"}}),(0,e.createElement)("text",{x:"50%",y:"50%",textAnchor:"middle",dy:".3em",fontSize:d,fill:m},l))}})})();