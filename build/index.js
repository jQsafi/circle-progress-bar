(()=>{"use strict";const e=window.React,t=window.wp.blocks,o=window.wp.blockEditor,r=window.wp.components;(0,t.registerBlockType)("circle-progress-bar/progress",{title:"Circle Progress Bar",icon:"chart-pie",category:"widgets",description:"A customizable circle progress bar.",keywords:["progress","circle","chart"],supports:{html:!1},attributes:{percentage:{type:"number",default:75},size:{type:"number",default:100},strokeColor:{type:"string",default:"#00aaff"},bgColor:{type:"string",default:"#e6e6e6"},text:{type:"string",default:"Progress"},useShadow:{type:"boolean",default:!1},useGradient:{type:"boolean",default:!1},strokeWidth:{type:"number",default:10},fontSize:{type:"number",default:20},fontColor:{type:"string",default:"#333"}},edit({attributes:t,setAttributes:l}){const{percentage:a,size:n,strokeColor:s,bgColor:i,text:c,useShadow:d,useGradient:m,strokeWidth:p,fontSize:u,fontColor:g}=t,f=n/2,h=f-p/2,y=2*h*Math.PI,b=y-a/100*y,C="grad-"+Math.random().toString(36).substring(2,8),k=(t,o,l)=>(0,e.createElement)("div",{style:{marginBottom:"16px"}},(0,e.createElement)("div",{className:"components-base-control__field"},(0,e.createElement)("span",{className:"components-base-control__label"},t),(0,e.createElement)(r.ColorPicker,{color:o,onChangeComplete:e=>l(e.hex),disableAlpha:!0})));return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.InspectorControls,null,(0,e.createElement)(r.PanelBody,{title:"Settings"},(0,e.createElement)(r.RangeControl,{label:"Progress (%)",value:a,onChange:e=>l({percentage:e}),min:0,max:100}),(0,e.createElement)(r.RangeControl,{label:"Size (px)",value:n,onChange:e=>l({size:e}),min:50,max:300}),(0,e.createElement)(r.RangeControl,{label:"Stroke Width",value:p,onChange:e=>l({strokeWidth:e}),min:1,max:30}),(0,e.createElement)(r.RangeControl,{label:"Font Size",value:u,onChange:e=>l({fontSize:e}),min:10,max:50}),(0,e.createElement)(r.TextControl,{label:"Custom Text",value:c,onChange:e=>l({text:e})}),k("Stroke Color",s,(e=>l({strokeColor:e}))),k("Background Color",i,(e=>l({bgColor:e}))),k("Font Color",g,(e=>l({fontColor:e}))),(0,e.createElement)(r.SelectControl,{label:"Use Gradient?",value:m?"yes":"no",options:[{label:"No",value:"no"},{label:"Yes",value:"yes"}],onChange:e=>l({useGradient:"yes"===e})}),(0,e.createElement)(r.SelectControl,{label:"Use Shadow?",value:d?"yes":"no",options:[{label:"No",value:"no"},{label:"Yes",value:"yes"}],onChange:e=>l({useShadow:"yes"===e})}))),(0,e.createElement)("svg",{height:n,width:n,style:{display:"block",margin:"auto"}},m&&(0,e.createElement)("defs",null,(0,e.createElement)("linearGradient",{id:C,x1:"0%",y1:"0%",x2:"100%",y2:"100%"},(0,e.createElement)("stop",{offset:"0%",stopColor:"#00aaff"}),(0,e.createElement)("stop",{offset:"100%",stopColor:s}))),(0,e.createElement)("circle",{stroke:i,fill:"transparent",strokeWidth:p,r:h,cx:f,cy:f}),(0,e.createElement)("circle",{stroke:m?`url(#${C})`:s,fill:"transparent",strokeWidth:p,strokeDasharray:`${y} ${y}`,strokeDashoffset:b,strokeLinecap:"round",r:h,cx:f,cy:f,style:{filter:d?"drop-shadow(0 0 5px rgba(0,0,0,0.5))":"none"}}),(0,e.createElement)("text",{x:"50%",y:"50%",textAnchor:"middle",dy:".3em",fontSize:u,fill:g},c)))},save({attributes:t}){const{percentage:o,size:r,strokeColor:l,bgColor:a,text:n,useShadow:s,useGradient:i,strokeWidth:c,fontSize:d,fontColor:m}=t,p=r/2,u=p-c/2,g=2*u*Math.PI,f=g-o/100*g,h="grad-static";return(0,e.createElement)("svg",{height:r,width:r,style:{display:"block",margin:"auto"}},i&&(0,e.createElement)("defs",null,(0,e.createElement)("linearGradient",{id:h,x1:"0%",y1:"0%",x2:"100%",y2:"100%"},(0,e.createElement)("stop",{offset:"0%",stopColor:"#00aaff"}),(0,e.createElement)("stop",{offset:"100%",stopColor:l}))),(0,e.createElement)("circle",{stroke:a,fill:"transparent",strokeWidth:c,r:u,cx:p,cy:p}),(0,e.createElement)("circle",{stroke:i?`url(#${h})`:l,fill:"transparent",strokeWidth:c,strokeDasharray:`${g} ${g}`,strokeDashoffset:f,strokeLinecap:"round",r:u,cx:p,cy:p,style:{filter:s?"drop-shadow(0 0 5px rgba(0,0,0,0.5))":"none"}}),(0,e.createElement)("text",{x:"50%",y:"50%",textAnchor:"middle",dy:".3em",fontSize:d,fill:m},n))}})})();